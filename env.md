# РџРµСЂРµРјРµРЅРЅС‹Рµ РѕРєСЂСѓР¶РµРЅРёСЏ

## Backend (`quests/backend/.env`)

### Django Рё СЃС‚Р°С‚РёС‡РµСЃРєРёРµ С„Р°Р№Р»С‹
- `DJANGO_SECRET_KEY` вЂ” РєСЂРёРїС‚РѕРіСЂР°С„РёС‡РµСЃРєРёР№ РєР»СЋС‡ Django; С‚СЂРµР±СѓРµС‚СЃСЏ РґР»СЏ РїРѕРґРїРёСЃРё СЃРµСЃСЃРёР№ Рё CSRF-С‚РѕРєРµРЅРѕРІ.
- `DJANGO_DEBUG` вЂ” РІРєР»СЋС‡Р°РµС‚/РІС‹РєР»СЋС‡Р°РµС‚ СЂРµР¶РёРј РѕС‚Р»Р°РґРєРё (РІ РїСЂРѕРґРµ СЃС‚Р°РІРёРј `0`, РёРЅР°С‡Рµ Р±СѓРґСѓС‚ РїРѕРґСЂРѕР±РЅС‹Рµ stack trace).
- `DJANGO_ALLOWED_HOSTS` вЂ” СЃРїРёСЃРѕРє РґРѕРјРµРЅРѕРІ/Р°РґСЂРµСЃРѕРІ, СЃ РєРѕС‚РѕСЂС‹С… СЂР°Р·СЂРµС€РµРЅС‹ Р·Р°РїСЂРѕСЃС‹ Рє СЃРµСЂРІРµСЂСѓ.
- `DJANGO_STATIC_URL` вЂ” Р±Р°Р·РѕРІС‹Р№ URL РґР»СЏ СЃС‚Р°С‚РёС‡РµСЃРєРёС… С„Р°Р№Р»РѕРІ (РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РїСЂРё СЂР°Р·РґР°С‡Рµ СЃРѕР±СЂР°РЅРЅРѕРіРѕ С„СЂРѕРЅС‚Р°).
- `DJANGO_MEDIA_URL` вЂ” URL-РїСЂРµС„РёРєСЃ РґР»СЏ РїРѕР»СЊР·РѕРІР°С‚РµР»СЊСЃРєРёС… РјРµРґРёР° (РґРѕР»Р¶РµРЅ СЃРѕРІРїР°РґР°С‚СЊ СЃ С‚РµРј, С‡С‚Рѕ РїСЂРѕРєРёРґС‹РІР°РµС‚СЃСЏ nginx/docker РІ `images/`).

### РџРѕРґРєР»СЋС‡РµРЅРёРµ Рє Р±Р°Р·Рµ PostgreSQL
- `POSTGRES_DB`, `POSTGRES_USER`, `POSTGRES_PASSWORD` вЂ” РёРјСЏ Р‘Р” Рё СѓС‡С‘С‚РєР°, РїРѕРґ РєРѕС‚РѕСЂРѕР№ Django Рё Celery РїРѕРґРєР»СЋС‡Р°СЋС‚СЃСЏ Рє Postgres.
- `POSTGRES_HOST`, `POSTGRES_PORT` вЂ” Р°РґСЂРµСЃ Рё РїРѕСЂС‚ Postgres (Р»РѕРєР°Р»СЊРЅРѕ `localhost:5432`, РІ Docker вЂ” `db:5432`).

### CORS/CSRF
- `CORS_ALLOWED_ORIGINS` вЂ” СЃРїРёСЃРѕРє С„СЂРѕРЅС‚РµРЅРґ-URL, РєРѕС‚РѕСЂС‹Рј РјРѕР¶РЅРѕ С‡РёС‚Р°С‚СЊ API С‡РµСЂРµР· Р±СЂР°СѓР·РµСЂ.
- `CORS_ALLOW_CREDENTIALS` вЂ” РµСЃР»Рё `1`, Р±СЂР°СѓР·РµСЂ РјРѕР¶РµС‚ СЃР»Р°С‚СЊ cookies/Authorization Р·Р°РіРѕР»РѕРІРєРё.
- `CORS_ALLOW_ALL_ORIGINS` вЂ” РіР»РѕР±Р°Р»СЊРЅРѕ РѕС‚РєСЂС‹РІР°РµС‚ CORS (РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ С‚РѕР»СЊРєРѕ РЅР° dev).
- `CSRF_TRUSTED_ORIGINS` вЂ” РґРѕРјРµРЅС‹, РґР»СЏ РєРѕС‚РѕСЂС‹С… Django РїСЂРёРЅРёРјР°РµС‚ CSRF cookie (Р°РєС‚СѓР°Р»СЊРЅРѕ РґР»СЏ Р°РґРјРёРЅРєРё Рё DRF С„РѕСЂРј).

### Р›РёРјРёС‚С‹ Р·Р°СЏРІРѕРє
- `ORDER_RATE_LIMIT_MAX_ATTEMPTS` вЂ” СЃРєРѕР»СЊРєРѕ РїРѕРїС‹С‚РѕРє Р±СЂРѕРЅРёСЂРѕРІР°РЅРёСЏ СЂР°Р·СЂРµС€РµРЅРѕ СЃ РѕРґРЅРѕРіРѕ IP Р·Р° РѕРєРЅРѕ (РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РІ `order/viewsets/order.py`).
- `ORDER_RATE_LIMIT_WINDOW_MINUTES` вЂ” РґР»РёС‚РµР»СЊРЅРѕСЃС‚СЊ РѕРєРЅР° РІ РјРёРЅСѓС‚Р°С….

### РђРІС‚РѕРіРµРЅРµСЂР°С†РёСЏ Рё РѕС‡РёСЃС‚РєР° СЂР°СЃРїРёСЃР°РЅРёР№ (Celery Beat)
- `AUTO_SCHEDULE_ENABLED` вЂ” РІРєР»СЋС‡Р°РµС‚ Р·Р°РґР°С‡Сѓ `auto-generate-schedule`.
- `AUTO_SCHEDULE_DAY_OF_WEEK`, `AUTO_SCHEDULE_HOUR`, `AUTO_SCHEDULE_MINUTE` вЂ” crontab РЅР°СЃС‚СЂРѕР№РєРё РґР»СЏ РіРµРЅРµСЂР°С†РёРё (РЅР°РїСЂРёРјРµСЂ, `sun 04:00` Р·Р°РїРѕР»РЅСЏРµС‚ Р±СѓРґСѓС‰РёРµ РЅРµРґРµР»Рё).
- `AUTO_SCHEDULE_WEEKS_AHEAD` вЂ” СЃРєРѕР»СЊРєРѕ РЅРµРґРµР»СЊ РІРїРµСЂС‘Рґ СЃРѕР·РґР°РІР°С‚СЊ СЂР°СЃРїРёСЃР°РЅРёСЏ (РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ Рё CLI-РєРѕРјР°РЅРґРѕР№, Рё Р·Р°РґР°С‡РµР№).
- `AUTO_SCHEDULE_CLEANUP_ENABLED` вЂ” РІРєР»СЋС‡Р°РµС‚ Р·Р°РґР°С‡Сѓ РѕС‡РёСЃС‚РєРё СЃС‚Р°СЂС‹С… СЃР»РѕС‚РѕРІ.
- `AUTO_SCHEDULE_CLEANUP_DAY_OF_WEEK`, `AUTO_SCHEDULE_CLEANUP_HOUR`, `AUTO_SCHEDULE_CLEANUP_MINUTE` вЂ” crontab РґР»СЏ РѕС‡РёСЃС‚РєРё.
- `AUTO_SCHEDULE_KEEP_DAYS` вЂ” СЃРєРѕР»СЊРєРѕ РґРЅРµР№ РёСЃС‚РѕСЂРёРё С…СЂР°РЅРёС‚СЊ РґРѕ СѓРґР°Р»РµРЅРёСЏ.

### Celery
- `CELERY_BROKER_URL` вЂ” Р°РґСЂРµСЃ Р±СЂРѕРєРµСЂР° СЃРѕРѕР±С‰РµРЅРёР№ (Р»РѕРєР°Р»СЊРЅРѕ `redis://localhost:6379/0`, РІ docker `redis://redis:6379/0`).
- `CELERY_RESULT_BACKEND` вЂ” РєСѓРґР° СЃРєР»Р°РґС‹РІР°С‚СЊ СЂРµР·СѓР»СЊС‚Р°С‚С‹ Р·Р°РґР°С‡ (РµСЃР»Рё РїСѓСЃС‚Рѕ, Celery РёСЃРїРѕР»СЊР·СѓРµС‚ Р±СЂРѕРєРµСЂ).
- `CELERY_DEFAULT_QUEUE` вЂ” РёРјСЏ РѕС‡РµСЂРµРґРё РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ РґР»СЏ РІСЃРµС… Р·Р°РґР°С‡.
- `CELERY_TASK_TIME_LIMIT` вЂ” РјР°РєСЃРёРјР°Р»СЊРЅР°СЏ РґР»РёС‚РµР»СЊРЅРѕСЃС‚СЊ РІС‹РїРѕР»РЅРµРЅРёСЏ Р·Р°РґР°С‡Рё РІ СЃРµРєСѓРЅРґР°С….

## Frontend (`quests/frontend/.env`)
- `REACT_APP_PATH_URL_API` вЂ” Р±Р°Р·РѕРІС‹Р№ URL REST API. Р—РЅР°С‡РµРЅРёРµ РїСЂРѕРєРёРґС‹РІР°РµС‚СЃСЏ РІ `src/config.js` Рё РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РІСЃРµРјРё `fetch` РІС‹Р·РѕРІР°РјРё (Р»РµРЅРґРёРЅРі, РјРѕРґР°Р»РєРё, Р·Р°РєР°Р·С‹). CRA С‡РёС‚Р°РµС‚ РїРµСЂРµРјРµРЅРЅСѓСЋ С‚РѕР»СЊРєРѕ РЅР° СЌС‚Р°РїРµ СЃР±РѕСЂРєРё/СЃС‚Р°СЂС‚Р° dev-СЃРµСЂРІРµСЂР°, РїРѕСЌС‚РѕРјСѓ РїРѕСЃР»Рµ РёР·РјРµРЅРµРЅРёСЏ РѕР±СЏР·Р°С‚РµР»СЊРЅРѕ РїРµСЂРµР·Р°РїСѓСЃРєР°Р№С‚Рµ `npm start` РёР»Рё `npm run build`.

## Nginx (quests/nginx/.env)
- FRONT_ALLOWED_ORIGINS_REGEX — regex для Origin, который подставляется в nginx-шаблон через envsubst (см. 
ginx/default.conf.template).
